{"version":3,"file":"index-CNnhjDRn.js","sources":["../../frontend/node_modules/react-dom/client.js","../../frontend/src/theme.ts","../../frontend/src/components/Layout.tsx","../../frontend/src/api/client.ts","../../frontend/src/hooks/useAuth.ts","../../frontend/src/components/AuthStatusChip.tsx","../../frontend/src/hooks/usePrices.ts","../../frontend/src/components/PriceChart.tsx","../../frontend/src/components/ScheduleGrid.tsx","../../frontend/src/components/ScheduleLegend.tsx","../../frontend/src/hooks/useScheduleHistory.ts","../../frontend/src/components/ScheduleHistoryList.tsx","../../frontend/src/components/JsonViewer.tsx","../../frontend/src/components/ConfirmDialog.tsx","../../frontend/src/hooks/useSchedulePreview.ts","../../frontend/src/hooks/useApplySchedule.ts","../../frontend/src/hooks/useCurrentSchedule.ts","../../frontend/src/pages/DashboardPage.tsx","../../frontend/src/hooks/useUserSettings.ts","../../frontend/src/hooks/useZone.ts","../../frontend/src/components/LoadingSkeleton.tsx","../../frontend/src/pages/SettingsPage.tsx","../../frontend/src/components/ErrorBoundary.tsx","../../frontend/src/App.tsx","../../frontend/src/main.tsx"],"sourcesContent":["'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import { createTheme } from '@mui/material/styles';\r\n\r\nexport const theme = createTheme({\r\n  palette: {\r\n    mode: 'dark', // Match current UI\r\n    primary: {\r\n      main: '#4FC3F7', // Light blue (current chart color)\r\n    },\r\n    secondary: {\r\n      main: '#FFB74D', // Orange (current chart color)\r\n    },\r\n    background: {\r\n      default: '#121212',\r\n      paper: '#1e1e1e',\r\n    },\r\n    success: {\r\n      main: '#8BC34A', // Green for comfort mode\r\n    },\r\n    warning: {\r\n      main: '#FFB74D', // Orange for eco mode (legacy)\r\n    },\r\n    error: {\r\n      main: '#EF5350', // Red for turn_off mode\r\n    },\r\n  },\r\n  typography: {\r\n    fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\r\n  },\r\n  components: {\r\n    MuiButton: {\r\n      styleOverrides: {\r\n        root: {\r\n          textTransform: 'none', // No ALL CAPS\r\n        },\r\n      },\r\n    },\r\n  },\r\n});\r\n","import { ReactNode } from 'react';\r\nimport { AppBar, Toolbar, Typography, Container, Button, Box } from '@mui/material';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport SettingsIcon from '@mui/icons-material/Settings';\r\nimport DashboardIcon from '@mui/icons-material/Dashboard';\r\n\r\ninterface LayoutProps {\r\n  children: ReactNode;\r\n}\r\n\r\nexport default function Layout({ children }: LayoutProps) {\r\n  return (\r\n    <Box sx={{ display: 'flex', flexDirection: 'column', minHeight: '100vh' }}>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <Typography variant=\"h6\" component=\"div\" sx={{ flexGrow: 1 }}>\r\n            Prisstyrning\r\n          </Typography>\r\n          <Button\r\n            color=\"inherit\"\r\n            component={RouterLink}\r\n            to=\"/\"\r\n            startIcon={<DashboardIcon />}\r\n          >\r\n            Dashboard\r\n          </Button>\r\n          <Button\r\n            color=\"inherit\"\r\n            component={RouterLink}\r\n            to=\"/settings\"\r\n            startIcon={<SettingsIcon />}\r\n          >\r\n            Settings\r\n          </Button>\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Container component=\"main\" sx={{ flex: 1, py: 4 }}>\r\n        {children}\r\n      </Container>\r\n    </Box>\r\n  );\r\n}\r\n","import type * as T from '../types/api';\r\n\r\nclass ApiClient {\r\n  private baseUrl = ''; // Empty for same-origin requests (Vite proxy handles routing)\r\n\r\n  // Auth endpoints\r\n  async getAuthStatus(): Promise<T.DaikinAuthStatus> {\r\n    return this.get('/auth/daikin/status');\r\n  }\r\n\r\n  async startAuth(): Promise<T.AuthUrlResponse> {\r\n    return this.get('/auth/daikin/start');\r\n  }\r\n\r\n  async refreshAuth(): Promise<T.AuthRefreshResponse> {\r\n    return this.post('/auth/daikin/refresh');\r\n  }\r\n\r\n  async revokeAuth(): Promise<T.AuthRevokeResponse> {\r\n    return this.post('/auth/daikin/revoke');\r\n  }\r\n\r\n  // Price endpoints\r\n  async getPriceTimeseries(source?: 'latest' | 'memory'): Promise<T.PriceTimeseries> {\r\n    const params = source ? `?source=${source}` : '';\r\n    return this.get(`/api/prices/timeseries${params}`);\r\n  }\r\n\r\n  async getZone(): Promise<T.ZoneResponse> {\r\n    return this.get('/api/prices/zone');\r\n  }\r\n\r\n  async setZone(zone: string): Promise<T.SaveZoneResponse> {\r\n    return this.post('/api/prices/zone', { zone });\r\n  }\r\n\r\n  // Schedule endpoints\r\n  async getSchedulePreview(): Promise<T.SchedulePreviewResponse> {\r\n    return this.get('/api/schedule/preview');\r\n  }\r\n\r\n  async getScheduleHistory(): Promise<T.ScheduleHistoryEntry[]> {\r\n    return this.get('/api/user/schedule-history');\r\n  }\r\n\r\n  // User Settings\r\n  async getUserSettings(): Promise<T.UserSettings> {\r\n    return this.get('/api/user/settings');\r\n  }\r\n\r\n  async saveUserSettings(settings: Partial<T.UserSettings>): Promise<T.SaveSettingsResponse> {\r\n    return this.post('/api/user/settings', settings);\r\n  }\r\n\r\n  // Daikin endpoints\r\n  async getDaikinSites(): Promise<unknown> {\r\n    return this.get('/api/daikin/sites');\r\n  }\r\n\r\n  async getGatewayDevices(): Promise<unknown> {\r\n    return this.get('/api/daikin/gateway?debug=true');\r\n  }\r\n\r\n  async getCurrentSchedule(embeddedId?: string): Promise<unknown> {\r\n    const params = embeddedId ? `?embeddedId=${embeddedId}` : '';\r\n    return this.get(`/api/daikin/gateway/schedule${params}`);\r\n  }\r\n\r\n  async applySchedule(payload: T.ApplyScheduleRequest): Promise<T.ApplyScheduleResponse> {\r\n    return this.post('/api/daikin/gateway/schedule/put', payload);\r\n  }\r\n\r\n  // Status\r\n  async getStatus(): Promise<T.StatusResponse> {\r\n    return this.get('/api/status');\r\n  }\r\n\r\n  // Helper methods\r\n  private async get<T>(url: string): Promise<T> {\r\n    const response = await fetch(this.baseUrl + url, {\r\n      credentials: 'same-origin', // Include cookies for ps_user\r\n    });\r\n    if (!response.ok) {\r\n      const text = await response.text();\r\n      throw new Error(text || `HTTP ${response.status}: ${url}`);\r\n    }\r\n    return response.json();\r\n  }\r\n\r\n  private async post<T>(url: string, body?: unknown): Promise<T> {\r\n    const response = await fetch(this.baseUrl + url, {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      credentials: 'same-origin', // Include cookies\r\n      body: body ? JSON.stringify(body) : undefined,\r\n    });\r\n    if (!response.ok) {\r\n      const text = await response.text();\r\n      throw new Error(text || `HTTP ${response.status}: ${url}`);\r\n    }\r\n    return response.json();\r\n  }\r\n}\r\n\r\nexport const apiClient = new ApiClient();\r\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { apiClient } from '../api/client';\r\n\r\nexport function useAuth() {\r\n  const queryClient = useQueryClient();\r\n\r\n  // Query auth status every minute\r\n  const { data, isLoading, error } = useQuery({\r\n    queryKey: ['auth', 'status'],\r\n    queryFn: () => apiClient.getAuthStatus(),\r\n    refetchInterval: 60 * 1000, // 1 minute\r\n    retry: 1,\r\n  });\r\n\r\n  // Mutation for manual refresh\r\n  const refreshMutation = useMutation({\r\n    mutationFn: () => apiClient.refreshAuth(),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['auth'] });\r\n    },\r\n  });\r\n\r\n  // Mutation for token revocation\r\n  const revokeMutation = useMutation({\r\n    mutationFn: () => apiClient.revokeAuth(),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['auth'] });\r\n    },\r\n  });\r\n\r\n  // Function to start OAuth flow\r\n  const startAuth = async () => {\r\n    const { url } = await apiClient.startAuth();\r\n    window.location.href = url; // Redirect to Daikin OAuth\r\n  };\r\n\r\n  return {\r\n    isAuthorized: data?.authorized ?? false,\r\n    expiresAt: data?.expiresAtUtc ?? null,\r\n    isLoading,\r\n    error,\r\n    startAuth,\r\n    refresh: refreshMutation.mutateAsync,\r\n    revoke: revokeMutation.mutateAsync,\r\n    isRefreshing: refreshMutation.isPending,\r\n    isRevoking: revokeMutation.isPending,\r\n  };\r\n}\r\n","import { Chip, CircularProgress, Tooltip } from '@mui/material';\r\nimport CheckCircleIcon from '@mui/icons-material/CheckCircle';\r\nimport ErrorIcon from '@mui/icons-material/Error';\r\nimport { useAuth } from '../hooks/useAuth';\r\nimport { format } from 'date-fns';\r\n\r\nexport default function AuthStatusChip() {\r\n  const { isAuthorized, expiresAt, isLoading } = useAuth();\r\n\r\n  if (isLoading) {\r\n    return <CircularProgress size={24} />;\r\n  }\r\n\r\n  if (!isAuthorized) {\r\n    return (\r\n      <Chip\r\n        icon={<ErrorIcon />}\r\n        label=\"Not Authorized\"\r\n        color=\"error\"\r\n        size=\"small\"\r\n      />\r\n    );\r\n  }\r\n\r\n  const expiresAtDate = expiresAt ? new Date(expiresAt) : null;\r\n  const tooltipText = expiresAtDate\r\n    ? `Expires: ${format(expiresAtDate, 'PPpp')}`\r\n    : 'Authorized';\r\n\r\n  return (\r\n    <Tooltip title={tooltipText}>\r\n      <Chip\r\n        icon={<CheckCircleIcon />}\r\n        label=\"Authorized\"\r\n        color=\"success\"\r\n        size=\"small\"\r\n      />\r\n    </Tooltip>\r\n  );\r\n}\r\n","import { useQuery } from '@tanstack/react-query';\r\nimport { apiClient } from '../api/client';\r\n\r\nexport function usePrices(source: 'latest' | 'memory' = 'latest') {\r\n  return useQuery({\r\n    queryKey: ['prices', 'timeseries', source],\r\n    queryFn: () => apiClient.getPriceTimeseries(source),\r\n    refetchInterval: 5 * 60 * 1000, // 5 minutes\r\n    staleTime: 5 * 60 * 1000,\r\n  });\r\n}\r\n","import { LineChart } from '@mui/x-charts/LineChart';\r\nimport { Card, CardContent, Typography, CircularProgress, Alert } from '@mui/material';\r\nimport { usePrices } from '../hooks/usePrices';\r\n\r\nexport default function PriceChart() {\r\n  const { data, isLoading, error } = usePrices();\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Card>\r\n        <CardContent sx={{ display: 'flex', justifyContent: 'center', p: 4 }}>\r\n          <CircularProgress />\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Card>\r\n        <CardContent>\r\n          <Alert severity=\"error\">\r\n            Failed to load price data: {error.message}\r\n          </Alert>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  if (!data || data.items.length === 0) {\r\n    return (\r\n      <Card>\r\n        <CardContent>\r\n          <Alert severity=\"info\">No price data available</Alert>\r\n        </CardContent>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  // Sort all items chronologically to form the X-axis\r\n  const allItems = [...data.items].sort((a, b) => \r\n    new Date(a.start).getTime() - new Date(b.start).getTime()\r\n  );\r\n  \r\n  const xAxisData = allItems.map(p => new Date(p.start).getTime());\r\n  \r\n  // Create series data matching the X-axis length\r\n  // Use null for points that don't belong to the series\r\n  const todayData = allItems.map((p) => \r\n    p.day === 'today' ? p.value : null\r\n  );\r\n\r\n  const tomorrowData = allItems.map((p) => \r\n    p.day === 'tomorrow' ? p.value : null\r\n  );\r\n\r\n  return (\r\n    <Card>\r\n      <CardContent>\r\n        <Typography variant=\"h6\" gutterBottom>\r\n          Electricity Prices (Ã¶re/kWh)\r\n        </Typography>\r\n        <LineChart\r\n          xAxis={[\r\n            {\r\n              data: xAxisData,\r\n              scaleType: 'time',\r\n              valueFormatter: (value: number) =>\r\n                new Date(value).toLocaleTimeString('sv-SE', {\r\n                  hour: '2-digit',\r\n                  minute: '2-digit',\r\n                }),\r\n            },\r\n          ]}\r\n          series={[\r\n            {\r\n              label: 'Today',\r\n              data: todayData,\r\n              color: '#4FC3F7', // Primary color\r\n              showMark: false,\r\n              curve: 'monotoneX',\r\n              connectNulls: false,\r\n            },\r\n            {\r\n              label: 'Tomorrow',\r\n              data: tomorrowData,\r\n              color: '#FFB74D', // Secondary color\r\n              showMark: false,\r\n              curve: 'monotoneX',\r\n              connectNulls: false,\r\n            },\r\n          ]}\r\n          height={300}\r\n          margin={{ top: 20, right: 20, bottom: 40, left: 60 }}\r\n        />\r\n        <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 2 }}>\r\n          Last updated: {data.updated ? new Date(data.updated).toLocaleString('sv-SE') : 'N/A'}\r\n        </Typography>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n","import { Box, Paper, Typography, styled } from '@mui/material';\r\nimport type { SchedulePayload, ScheduleState } from '../types/api';\r\n\r\nconst GridContainer = styled(Box)(({ theme }) => ({\r\n  display: 'grid',\r\n  gridTemplateColumns: 'auto repeat(24, 1fr)',\r\n  gap: theme.spacing(0.25),\r\n  alignItems: 'center',\r\n}));\r\n\r\nconst HourHeader = styled(Box)(({ theme }) => ({\r\n  textAlign: 'center',\r\n  fontSize: '0.75rem',\r\n  color: theme.palette.text.secondary,\r\n  padding: theme.spacing(0.5),\r\n}));\r\n\r\nconst DayLabel = styled(Box)(({ theme }) => ({\r\n  fontSize: '0.875rem',\r\n  fontWeight: 500,\r\n  padding: theme.spacing(0.5),\r\n  textAlign: 'right',\r\n  paddingRight: theme.spacing(1),\r\n}));\r\n\r\ninterface CellProps {\r\n  state?: ScheduleState;\r\n  isCurrentHour?: boolean;\r\n}\r\n\r\nconst Cell = styled(Box, {\r\n  shouldForwardProp: (prop) => prop !== 'state' && prop !== 'isCurrentHour',\r\n})<CellProps>(({ theme, state, isCurrentHour }) => ({\r\n  height: 32,\r\n  border: `1px solid ${theme.palette.divider}`,\r\n  borderRadius: theme.shape.borderRadius,\r\n  position: 'relative',\r\n  backgroundColor:\r\n    state === 'comfort'\r\n      ? theme.palette.success.main\r\n      : state === 'turn_off'\r\n      ? theme.palette.error.main\r\n      : theme.palette.action.disabledBackground,\r\n  outline: isCurrentHour ? `2px solid ${theme.palette.primary.main}` : 'none',\r\n  boxShadow: isCurrentHour ? `0 0 6px ${theme.palette.primary.main}` : 'none',\r\n  transition: 'all 0.2s',\r\n  '&:hover': {\r\n    transform: 'scale(1.05)',\r\n  },\r\n}));\r\n\r\ninterface ScheduleGridProps {\r\n  schedulePayload: SchedulePayload | null;\r\n}\r\n\r\nexport default function ScheduleGrid({ schedulePayload }: ScheduleGridProps) {\r\n  if (!schedulePayload) {\r\n    return (\r\n      <Paper sx={{ p: 2 }}>\r\n        <Typography color=\"text.secondary\">No schedule available</Typography>\r\n      </Paper>\r\n    );\r\n  }\r\n\r\n  // Parse schedule payload (complex logic - see current ui.js for reference)\r\n  // Extract 24x2 grid of states for today and tomorrow\r\n  \r\n  // Get current hour for highlighting\r\n  const now = new Date();\r\n  const currentHour = now.getHours();\r\n  const currentDay = now.getDay(); // 0 = Sunday, 6 = Saturday\r\n\r\n  // Simplified parsing (TODO: Handle all schedule formats)\r\n  const scheduleId = Object.keys(schedulePayload)[0];\r\n  const schedule = schedulePayload[scheduleId];\r\n  const actions = schedule?.actions || {};\r\n\r\n  // Map day names\r\n  const dayNames = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday', 'saturday'];\r\n  const todayName = dayNames[currentDay];\r\n  const tomorrowName = dayNames[(currentDay + 1) % 7];\r\n\r\n  // Extract today's states\r\n  const todayActions = actions[todayName] || {};\r\n  const todayStates: Array<ScheduleState | undefined> = Array.from({ length: 24 }, (_, hour) => {\r\n    const timeKey = `${hour.toString().padStart(2, '0')}:00:00`;\r\n    return todayActions[timeKey]?.domesticHotWaterTemperature as ScheduleState | undefined;\r\n  });\r\n\r\n  // Extract tomorrow's states\r\n  const tomorrowActions = actions[tomorrowName] || {};\r\n  const tomorrowStates: Array<ScheduleState | undefined> = Array.from({ length: 24 }, (_, hour) => {\r\n    const timeKey = `${hour.toString().padStart(2, '0')}:00:00`;\r\n    return tomorrowActions[timeKey]?.domesticHotWaterTemperature as ScheduleState | undefined;\r\n  });\r\n\r\n  return (\r\n    <Paper sx={{ p: 2 }}>\r\n      <GridContainer>\r\n        {/* Header row */}\r\n        <Box /> {/* Empty corner */}\r\n        {Array.from({ length: 24 }, (_, i) => (\r\n          <HourHeader key={i}>{i}</HourHeader>\r\n        ))}\r\n\r\n        {/* Today row */}\r\n        <DayLabel>Today</DayLabel>\r\n        {todayStates.map((state, hour) => (\r\n          <Cell key={`today-${hour}`} state={state} isCurrentHour={hour === currentHour} />\r\n        ))}\r\n\r\n        {/* Tomorrow row */}\r\n        <DayLabel>Tomorrow</DayLabel>\r\n        {tomorrowStates.map((state, hour) => (\r\n          <Cell key={`tomorrow-${hour}`} state={state} />\r\n        ))}\r\n      </GridContainer>\r\n    </Paper>\r\n  );\r\n}\r\n","import { Box, Typography, Stack } from '@mui/material';\r\nimport CircleIcon from '@mui/icons-material/Circle';\r\n\r\nexport default function ScheduleLegend() {\r\n  return (\r\n    <Stack direction=\"row\" spacing={3} sx={{ mt: 2 }}>\r\n      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n        <CircleIcon sx={{ color: 'success.main', fontSize: 16 }} />\r\n        <Typography variant=\"body2\">Comfort (Heating)</Typography>\r\n      </Box>\r\n      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n        <CircleIcon sx={{ color: 'error.main', fontSize: 16 }} />\r\n        <Typography variant=\"body2\">Turn Off (No Heating)</Typography>\r\n      </Box>\r\n    </Stack>\r\n  );\r\n}\r\n","import { useQuery } from '@tanstack/react-query';\r\nimport { apiClient } from '../api/client';\r\n\r\nexport function useScheduleHistory() {\r\n  return useQuery({\r\n    queryKey: ['schedule', 'history'],\r\n    queryFn: () => apiClient.getScheduleHistory(),\r\n    staleTime: 60 * 1000, // 1 minute\r\n  });\r\n}\r\n","import { useState } from 'react';\r\nimport {\r\n  Accordion,\r\n  AccordionSummary,\r\n  AccordionDetails,\r\n  Typography,\r\n  Box,\r\n  Chip,\r\n  CircularProgress,\r\n  Alert,\r\n} from '@mui/material';\r\nimport ExpandMoreIcon from '@mui/icons-material/ExpandMore';\r\nimport { format } from 'date-fns';\r\nimport { useScheduleHistory } from '../hooks/useScheduleHistory';\r\nimport ScheduleGrid from './ScheduleGrid';\r\n\r\nexport default function ScheduleHistoryList() {\r\n  const { data, isLoading, error } = useScheduleHistory();\r\n  const [expanded, setExpanded] = useState<string | false>(false);\r\n\r\n  const handleChange = (panel: string) => (_: React.SyntheticEvent, isExpanded: boolean) => {\r\n    setExpanded(isExpanded ? panel : false);\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Box sx={{ display: 'flex', justifyContent: 'center', p: 3 }}>\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Alert severity=\"error\">\r\n        Failed to load schedule history: {error.message}\r\n      </Alert>\r\n    );\r\n  }\r\n\r\n  if (!data || data.length === 0) {\r\n    return (\r\n      <Alert severity=\"info\">\r\n        No schedule history found. Generate a schedule to see it here.\r\n      </Alert>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box>\r\n      {data.map((entry, index) => {\r\n        const panelId = `history-${index}`;\r\n        const timestamp = new Date(entry.timestamp);\r\n        \r\n        return (\r\n          <Accordion\r\n            key={panelId}\r\n            expanded={expanded === panelId}\r\n            onChange={handleChange(panelId)}\r\n            sx={{ mb: 1 }}\r\n          >\r\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 2, width: '100%' }}>\r\n                <Typography>\r\n                  {format(timestamp, 'PPpp')}\r\n                </Typography>\r\n                <Chip label={entry.date} size=\"small\" />\r\n              </Box>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              <ScheduleGrid schedulePayload={entry.schedule} />\r\n            </AccordionDetails>\r\n          </Accordion>\r\n        );\r\n      })}\r\n    </Box>\r\n  );\r\n}\r\n","import { Box, Typography, Paper } from '@mui/material';\r\n\r\ninterface JsonViewerProps {\r\n  data: unknown;\r\n  title?: string;\r\n}\r\n\r\nexport default function JsonViewer({ data, title }: JsonViewerProps) {\r\n  return (\r\n    <Paper sx={{ p: 2, bgcolor: 'background.default' }}>\r\n      {title && (\r\n        <Typography variant=\"subtitle2\" gutterBottom>\r\n          {title}\r\n        </Typography>\r\n      )}\r\n      <Box\r\n        component=\"pre\"\r\n        sx={{\r\n          fontFamily: 'monospace',\r\n          fontSize: '0.875rem',\r\n          overflow: 'auto',\r\n          maxHeight: 400,\r\n          margin: 0,\r\n        }}\r\n      >\r\n        {JSON.stringify(data, null, 2)}\r\n      </Box>\r\n    </Paper>\r\n  );\r\n}\r\n","import {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  DialogContentText,\r\n} from '@mui/material';\r\n\r\ninterface ConfirmDialogProps {\r\n  open: boolean;\r\n  title: string;\r\n  message: string;\r\n  confirmText?: string;\r\n  cancelText?: string;\r\n  onConfirm: () => void;\r\n  onCancel: () => void;\r\n  isDestructive?: boolean;\r\n}\r\n\r\nexport default function ConfirmDialog({\r\n  open,\r\n  title,\r\n  message,\r\n  confirmText = 'Confirm',\r\n  cancelText = 'Cancel',\r\n  onConfirm,\r\n  onCancel,\r\n  isDestructive = false,\r\n}: ConfirmDialogProps) {\r\n  return (\r\n    <Dialog open={open} onClose={onCancel}>\r\n      <DialogTitle>{title}</DialogTitle>\r\n      <DialogContent>\r\n        <DialogContentText>{message}</DialogContentText>\r\n      </DialogContent>\r\n      <DialogActions>\r\n        <Button onClick={onCancel}>{cancelText}</Button>\r\n        <Button\r\n          onClick={onConfirm}\r\n          variant=\"contained\"\r\n          color={isDestructive ? 'error' : 'primary'}\r\n          autoFocus\r\n        >\r\n          {confirmText}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n}\r\n","import { useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { apiClient } from '../api/client';\r\n\r\nexport function useSchedulePreview() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: () => apiClient.getSchedulePreview(),\r\n    onSuccess: () => {\r\n      // Invalidate history to show newly persisted schedule\r\n      queryClient.invalidateQueries({ queryKey: ['schedule', 'history'] });\r\n    },\r\n  });\r\n}\r\n","import { useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { apiClient } from '../api/client';\r\nimport type { SchedulePayload } from '../types/api';\r\n\r\ninterface ApplyScheduleParams {\r\n  gatewayDeviceId: string;\r\n  embeddedId: string;\r\n  schedulePayload: SchedulePayload;\r\n  mode?: string;\r\n  activateScheduleId?: string;\r\n}\r\n\r\nexport function useApplySchedule() {\r\n  const queryClient = useQueryClient();\r\n\r\n  return useMutation({\r\n    mutationFn: (params: ApplyScheduleParams) =>\r\n      apiClient.applySchedule(params),\r\n    onSuccess: () => {\r\n      // Invalidate current schedule to refetch updated state\r\n      queryClient.invalidateQueries({ queryKey: ['schedule', 'current'] });\r\n    },\r\n  });\r\n}\r\n","import { useMutation } from '@tanstack/react-query';\r\nimport { apiClient } from '../api/client';\r\n\r\nexport function useCurrentSchedule() {\r\n  return useMutation({\r\n    mutationFn: (embeddedId?: string) => apiClient.getCurrentSchedule(embeddedId),\r\n  });\r\n}\r\n","import { useState } from 'react';\r\nimport { Stack, Paper, Typography, Button, Alert, Box, Snackbar, Alert as MuiAlert, TextField } from '@mui/material';\r\nimport AuthStatusChip from '../components/AuthStatusChip';\r\nimport PriceChart from '../components/PriceChart';\r\nimport ScheduleGrid from '../components/ScheduleGrid';\r\nimport ScheduleLegend from '../components/ScheduleLegend';\r\nimport ScheduleHistoryList from '../components/ScheduleHistoryList';\r\nimport JsonViewer from '../components/JsonViewer';\r\nimport ConfirmDialog from '../components/ConfirmDialog';\r\nimport { useAuth } from '../hooks/useAuth';\r\nimport { useSchedulePreview } from '../hooks/useSchedulePreview';\r\nimport { useApplySchedule } from '../hooks/useApplySchedule';\r\nimport { useCurrentSchedule } from '../hooks/useCurrentSchedule';\r\n\r\nexport default function DashboardPage() {\r\n  const { isAuthorized, startAuth, refresh, isRefreshing } = useAuth();\r\n  const schedulePreview = useSchedulePreview();\r\n\r\n  // New state\r\n  const [snackbar, setSnackbar] = useState<{\r\n    open: boolean;\r\n    message: string;\r\n    severity: 'success' | 'error' | 'info' | 'warning';\r\n  }>({ open: false, message: '', severity: 'info' });\r\n\r\n  const [applyDialog, setApplyDialog] = useState(false);\r\n  const [deviceIds, setDeviceIds] = useState({ gateway: '', embedded: '' });\r\n\r\n  // New hooks\r\n  const applySchedule = useApplySchedule();\r\n  const currentSchedule = useCurrentSchedule();\r\n\r\n  const handleGenerateSchedule = async () => {\r\n    try {\r\n      await schedulePreview.mutateAsync();\r\n    } catch (error) {\r\n      console.error('Failed to generate schedule:', error);\r\n    }\r\n  };\r\n\r\n  const handleApplySchedule = async () => {\r\n    if (!schedulePreview.data?.schedulePayload) {\r\n      setSnackbar({\r\n        open: true,\r\n        message: 'No schedule to apply. Generate a schedule first.',\r\n        severity: 'error',\r\n      });\r\n      return;\r\n    }\r\n\r\n    setApplyDialog(true);\r\n  };\r\n\r\n  const confirmApplySchedule = async () => {\r\n    setApplyDialog(false);\r\n\r\n    if (!deviceIds.gateway || !deviceIds.embedded) {\r\n      setSnackbar({\r\n        open: true,\r\n        message: 'Gateway Device ID and Embedded ID are required',\r\n        severity: 'error',\r\n      });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await applySchedule.mutateAsync({\r\n        gatewayDeviceId: deviceIds.gateway,\r\n        embeddedId: deviceIds.embedded,\r\n        schedulePayload: schedulePreview.data!.schedulePayload!,\r\n      });\r\n\r\n      setSnackbar({\r\n        open: true,\r\n        message: 'Schedule applied successfully!',\r\n        severity: 'success',\r\n      });\r\n    } catch (error) {\r\n      setSnackbar({\r\n        open: true,\r\n        message: `Failed to apply schedule: ${error}`,\r\n        severity: 'error',\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleRetrieveCurrentSchedule = async () => {\r\n    try {\r\n      await currentSchedule.mutateAsync(deviceIds.embedded || undefined);\r\n      setSnackbar({\r\n        open: true,\r\n        message: 'Current schedule retrieved',\r\n        severity: 'success',\r\n      });\r\n    } catch (error) {\r\n      setSnackbar({\r\n        open: true,\r\n        message: `Failed to retrieve schedule: ${error}`,\r\n        severity: 'error',\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Stack spacing={3}>\r\n      {/* Auth Section */}\r\n      <Paper sx={{ p: 3 }}>\r\n        <Stack direction=\"row\" spacing={2} alignItems=\"center\" sx={{ mb: 2 }}>\r\n          <Typography variant=\"h5\">Daikin Authorization</Typography>\r\n          <AuthStatusChip />\r\n        </Stack>\r\n        \r\n        <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2}>\r\n          {!isAuthorized ? (\r\n            <Button variant=\"contained\" onClick={startAuth}>\r\n              Start OAuth Flow\r\n            </Button>\r\n          ) : (\r\n            <Button\r\n              variant=\"outlined\"\r\n              onClick={() => refresh()}\r\n              disabled={isRefreshing}\r\n            >\r\n              {isRefreshing ? 'Refreshing...' : 'Refresh Token'}\r\n            </Button>\r\n          )}\r\n        </Stack>\r\n      </Paper>\r\n\r\n      {/* Price Chart */}\r\n      <PriceChart />\r\n\r\n      {/* Schedule Preview */}\r\n      <Paper sx={{ p: 3 }}>\r\n        <Typography variant=\"h5\" gutterBottom>\r\n          Schedule Preview\r\n        </Typography>\r\n\r\n        {!isAuthorized && (\r\n          <Alert severity=\"warning\" sx={{ mb: 2 }}>\r\n            Authorize with Daikin to apply schedules to your device\r\n          </Alert>\r\n        )}\r\n\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"primary\"\r\n          onClick={handleGenerateSchedule}\r\n          disabled={schedulePreview.isPending}\r\n          sx={{ mb: 2 }}\r\n        >\r\n          {schedulePreview.isPending ? 'Generating...' : 'Generate Schedule'}\r\n        </Button>\r\n\r\n        {schedulePreview.isError && (\r\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n            Failed to generate schedule: {schedulePreview.error.message}\r\n          </Alert>\r\n        )}\r\n\r\n        {schedulePreview.data && (\r\n          <Box>\r\n            <ScheduleGrid schedulePayload={schedulePreview.data.schedulePayload} />\r\n            <ScheduleLegend />\r\n            \r\n            {schedulePreview.data.message && (\r\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 2 }}>\r\n                {schedulePreview.data.message}\r\n              </Typography>\r\n            )}\r\n          </Box>\r\n        )}\r\n      </Paper>\r\n\r\n      {/* Apply Schedule Section */}\r\n      <Paper sx={{ p: 3 }}>\r\n        <Typography variant=\"h5\" gutterBottom>\r\n          Apply Schedule to Daikin\r\n        </Typography>\r\n\r\n        <Stack spacing={2}>\r\n          <TextField\r\n            label=\"Gateway Device ID\"\r\n            value={deviceIds.gateway}\r\n            onChange={(e) => setDeviceIds({ ...deviceIds, gateway: e.target.value })}\r\n            placeholder=\"Enter gateway device ID\"\r\n            fullWidth\r\n            disabled={!isAuthorized}\r\n          />\r\n          \r\n          <TextField\r\n            label=\"Embedded ID\"\r\n            value={deviceIds.embedded}\r\n            onChange={(e) => setDeviceIds({ ...deviceIds, embedded: e.target.value })}\r\n            placeholder=\"Enter embedded ID\"\r\n            fullWidth\r\n            disabled={!isAuthorized}\r\n          />\r\n\r\n          <Stack direction={{ xs: 'column', sm: 'row' }} spacing={2}>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={handleApplySchedule}\r\n              disabled={!isAuthorized || !schedulePreview.data?.schedulePayload || applySchedule.isPending}\r\n            >\r\n              {applySchedule.isPending ? 'Applying...' : 'Apply Schedule'}\r\n            </Button>\r\n\r\n            <Button\r\n              variant=\"outlined\"\r\n              onClick={handleRetrieveCurrentSchedule}\r\n              disabled={!isAuthorized || currentSchedule.isPending}\r\n            >\r\n              {currentSchedule.isPending ? 'Retrieving...' : 'Retrieve Current Schedule'}\r\n            </Button>\r\n          </Stack>\r\n        </Stack>\r\n\r\n        {!!currentSchedule.data && (\r\n          <Box sx={{ mt: 3 }}>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              Current Schedule\r\n            </Typography>\r\n            <JsonViewer data={currentSchedule.data} />\r\n          </Box>\r\n        )}\r\n      </Paper>\r\n\r\n      {/* History Section */}\r\n      <Paper sx={{ p: 3 }}>\r\n        <Typography variant=\"h5\" gutterBottom>\r\n          Schedule History\r\n        </Typography>\r\n        <ScheduleHistoryList />\r\n      </Paper>\r\n\r\n      {/* Dialogs and Snackbar */}\r\n      <ConfirmDialog\r\n        open={applyDialog}\r\n        title=\"Apply Schedule\"\r\n        message=\"Are you sure you want to apply this schedule to your Daikin device? This will replace the current schedule.\"\r\n        confirmText=\"Apply\"\r\n        cancelText=\"Cancel\"\r\n        onConfirm={confirmApplySchedule}\r\n        onCancel={() => setApplyDialog(false)}\r\n      />\r\n\r\n      <Snackbar\r\n        open={snackbar.open}\r\n        autoHideDuration={6000}\r\n        onClose={() => setSnackbar({ ...snackbar, open: false })}\r\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\r\n      >\r\n        <MuiAlert\r\n          onClose={() => setSnackbar({ ...snackbar, open: false })}\r\n          severity={snackbar.severity}\r\n          sx={{ width: '100%' }}\r\n        >\r\n          {snackbar.message}\r\n        </MuiAlert>\r\n      </Snackbar>\r\n    </Stack>\r\n  );\r\n}\r\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { apiClient } from '../api/client';\r\nimport type { UserSettings } from '../types/api';\r\n\r\nexport function useUserSettings() {\r\n  const queryClient = useQueryClient();\r\n\r\n  const query = useQuery({\r\n    queryKey: ['user', 'settings'],\r\n    queryFn: () => apiClient.getUserSettings(),\r\n    staleTime: 60 * 1000, // 1 minute\r\n  });\r\n\r\n  const updateMutation = useMutation({\r\n    mutationFn: (settings: UserSettings) => apiClient.saveUserSettings(settings),\r\n    onSuccess: () => {\r\n      // Invalidate settings and schedule preview\r\n      queryClient.invalidateQueries({ queryKey: ['user', 'settings'] });\r\n      queryClient.invalidateQueries({ queryKey: ['schedule', 'preview'] });\r\n    },\r\n  });\r\n\r\n  return {\r\n    settings: query.data,\r\n    isLoading: query.isLoading,\r\n    error: query.error,\r\n    updateSettings: updateMutation.mutateAsync,\r\n    isUpdating: updateMutation.isPending,\r\n  };\r\n}\r\n","import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query';\r\nimport { apiClient } from '../api/client';\r\n\r\nexport function useZone() {\r\n  const queryClient = useQueryClient();\r\n\r\n  const query = useQuery({\r\n    queryKey: ['user', 'zone'],\r\n    queryFn: async () => {\r\n      const response = await apiClient.getZone();\r\n      return response.zone;\r\n    },\r\n    staleTime: 5 * 60 * 1000, // 5 minutes\r\n  });\r\n\r\n  const updateMutation = useMutation({\r\n    mutationFn: (zone: string) => apiClient.setZone(zone),\r\n    onSuccess: () => {\r\n      queryClient.invalidateQueries({ queryKey: ['user', 'zone'] });\r\n      queryClient.invalidateQueries({ queryKey: ['prices', 'timeseries'] });\r\n      queryClient.invalidateQueries({ queryKey: ['schedule', 'preview'] });\r\n    },\r\n  });\r\n\r\n  return {\r\n    zone: query.data,\r\n    isLoading: query.isLoading,\r\n    error: query.error,\r\n    setZone: updateMutation.mutateAsync,\r\n    isUpdating: updateMutation.isPending,\r\n  };\r\n}\r\n","import { Paper, Skeleton, Stack } from '@mui/material';\r\n\r\nexport default function LoadingSkeleton() {\r\n  return (\r\n    <Stack spacing={3}>\r\n      <Paper sx={{ p: 3 }}>\r\n        <Skeleton variant=\"text\" width=\"40%\" height={40} />\r\n        <Skeleton variant=\"rectangular\" height={200} sx={{ mt: 2 }} />\r\n      </Paper>\r\n      <Paper sx={{ p: 3 }}>\r\n        <Skeleton variant=\"text\" width=\"30%\" height={40} />\r\n        <Skeleton variant=\"rectangular\" height={150} sx={{ mt: 2 }} />\r\n      </Paper>\r\n      <Paper sx={{ p: 3 }}>\r\n        <Skeleton variant=\"text\" width=\"50%\" height={40} />\r\n        <Skeleton variant=\"rectangular\" height={100} sx={{ mt: 2 }} />\r\n      </Paper>\r\n    </Stack>\r\n  );\r\n}\r\n","import { useState, useEffect } from 'react';\r\nimport {\r\n  Container,\r\n  Paper,\r\n  Typography,\r\n  Stack,\r\n  Slider,\r\n  TextField,\r\n  Switch,\r\n  FormControlLabel,\r\n  Button,\r\n  Divider,\r\n  Box,\r\n  Alert,\r\n  Snackbar,\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n  CircularProgress,\r\n} from '@mui/material';\r\nimport { useUserSettings } from '../hooks/useUserSettings';\r\nimport { useZone } from '../hooks/useZone';\r\nimport { useAuth } from '../hooks/useAuth';\r\nimport ConfirmDialog from '../components/ConfirmDialog';\r\nimport LoadingSkeleton from '../components/LoadingSkeleton';\r\n\r\n// Nordpool zones\r\nconst ZONES = [\r\n  'SE1', 'SE2', 'SE3', 'SE4',\r\n  'NO1', 'NO2', 'NO3', 'NO4', 'NO5',\r\n  'DK1', 'DK2',\r\n  'FI',\r\n];\r\n\r\nexport default function SettingsPage() {\r\n  const { settings, isLoading, error, updateSettings, isUpdating } = useUserSettings();\r\n  const { zone, setZone, isUpdating: isZoneUpdating } = useZone();\r\n  const { isAuthorized, refresh, revoke, isRefreshing } = useAuth();\r\n\r\n  // Local state for form\r\n  const [formData, setFormData] = useState({\r\n    comfortHours: 3,\r\n    turnOffPercentile: 0.9,\r\n    maxComfortGapHours: 1,\r\n    autoApplySchedule: false,\r\n    selectedZone: 'SE3',\r\n  });\r\n\r\n  const [snackbar, setSnackbar] = useState({\r\n    open: false,\r\n    message: '',\r\n    severity: 'success' as 'success' | 'error' | 'info',\r\n  });\r\n\r\n  const [revokeDialog, setRevokeDialog] = useState(false);\r\n\r\n  // Initialize form from settings\r\n  useEffect(() => {\r\n    if (settings) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        comfortHours: settings.ComfortHours ?? 3,\r\n        turnOffPercentile: settings.TurnOffPercentile ?? 0.9,\r\n        maxComfortGapHours: settings.MaxComfortGapHours ?? 1,\r\n        autoApplySchedule: settings.AutoApplySchedule ?? false,\r\n      }));\r\n    }\r\n  }, [settings]);\r\n\r\n  useEffect(() => {\r\n    if (zone) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        selectedZone: zone\r\n      }));\r\n    }\r\n  }, [zone]);\r\n\r\n\r\n  const handleSaveSettings = async () => {\r\n    try {\r\n      await updateSettings({\r\n        ComfortHours: formData.comfortHours,\r\n        TurnOffPercentile: formData.turnOffPercentile,\r\n        MaxComfortGapHours: formData.maxComfortGapHours,\r\n        AutoApplySchedule: formData.autoApplySchedule,\r\n      });\r\n\r\n      if (formData.selectedZone !== zone) {\r\n        await setZone(formData.selectedZone);\r\n      }\r\n\r\n      setSnackbar({\r\n        open: true,\r\n        message: 'Settings saved successfully',\r\n        severity: 'success',\r\n      });\r\n    } catch (err) {\r\n      setSnackbar({\r\n        open: true,\r\n        message: `Failed to save settings: ${err}`,\r\n        severity: 'error',\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleRevokeToken = async () => {\r\n    setRevokeDialog(false);\r\n    try {\r\n      await revoke();\r\n      setSnackbar({\r\n        open: true,\r\n        message: 'Daikin authentication revoked',\r\n        severity: 'info',\r\n      });\r\n    } catch (err) {\r\n      setSnackbar({\r\n        open: true,\r\n        message: `Failed to revoke: ${err}`,\r\n        severity: 'error',\r\n      });\r\n    }\r\n  };\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <Container maxWidth=\"md\" sx={{ py: 4 }}>\r\n        <LoadingSkeleton />\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Container maxWidth=\"md\" sx={{ py: 4 }}>\r\n        <Alert severity=\"error\">Failed to load settings: {error.message}</Alert>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container maxWidth=\"md\" sx={{ py: 4 }}>\r\n      <Typography variant=\"h4\" gutterBottom sx={{ fontSize: { xs: '1.5rem', md: '2rem' } }}>\r\n        Settings\r\n      </Typography>\r\n\r\n      <Stack spacing={3}>\r\n        {/* Schedule Settings */}\r\n        <Paper sx={{ p: 3 }}>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            Schedule Configuration\r\n          </Typography>\r\n\r\n          <Stack spacing={3}>\r\n            <Box>\r\n              <Typography gutterBottom>\r\n                Comfort Hours: {formData.comfortHours}\r\n              </Typography>\r\n              <Slider\r\n                value={formData.comfortHours}\r\n                onChange={(_, value) =>\r\n                  setFormData({ ...formData, comfortHours: value as number })\r\n                }\r\n                min={1}\r\n                max={10}\r\n                step={1}\r\n                marks\r\n                valueLabelDisplay=\"auto\"\r\n              />\r\n              <Typography variant=\"caption\" color=\"text.secondary\">\r\n                Number of hours per day to heat water to comfort temperature\r\n              </Typography>\r\n            </Box>\r\n\r\n            <Box>\r\n              <Typography gutterBottom>\r\n                Turn Off Percentile: {(formData.turnOffPercentile * 100).toFixed(0)}%\r\n              </Typography>\r\n              <Slider\r\n                value={formData.turnOffPercentile}\r\n                onChange={(_, value) =>\r\n                  setFormData({ ...formData, turnOffPercentile: value as number })\r\n                }\r\n                min={0.5}\r\n                max={1.0}\r\n                step={0.05}\r\n                marks={[\r\n                  { value: 0.5, label: '50%' },\r\n                  { value: 0.75, label: '75%' },\r\n                  { value: 1.0, label: '100%' },\r\n                ]}\r\n                valueLabelDisplay=\"auto\"\r\n                valueLabelFormat={(value) => `${(value * 100).toFixed(0)}%`}\r\n              />\r\n              <Typography variant=\"caption\" color=\"text.secondary\">\r\n                Price threshold for turning off DHW heating (higher = less turn-off)\r\n              </Typography>\r\n            </Box>\r\n\r\n            <TextField\r\n              label=\"Max Comfort Gap (hours)\"\r\n              type=\"number\"\r\n              value={formData.maxComfortGapHours}\r\n              onChange={(e) =>\r\n                setFormData({\r\n                  ...formData,\r\n                  maxComfortGapHours: parseInt(e.target.value) || 1,\r\n                })\r\n              }\r\n              inputProps={{ min: 0, max: 5, step: 1 }}\r\n              helperText=\"Maximum gap between consecutive comfort hours (0 = disabled)\"\r\n            />\r\n\r\n            <FormControl fullWidth>\r\n              <InputLabel>Nordpool Zone</InputLabel>\r\n              <Select\r\n                value={formData.selectedZone}\r\n                onChange={(e) =>\r\n                  setFormData({ ...formData, selectedZone: e.target.value })\r\n                }\r\n                label=\"Nordpool Zone\"\r\n              >\r\n                {ZONES.map((z) => (\r\n                  <MenuItem key={z} value={z}>\r\n                    {z}\r\n                  </MenuItem>\r\n                ))}\r\n              </Select>\r\n            </FormControl>\r\n          </Stack>\r\n        </Paper>\r\n\r\n        {/* Automation Settings */}\r\n        <Paper sx={{ p: 3 }}>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            Automation\r\n          </Typography>\r\n\r\n          <FormControlLabel\r\n            control={\r\n              <Switch\r\n                checked={formData.autoApplySchedule}\r\n                onChange={(e) =>\r\n                  setFormData({ ...formData, autoApplySchedule: e.target.checked })\r\n                }\r\n              />\r\n            }\r\n            label=\"Auto-apply schedule daily\"\r\n          />\r\n          <Typography variant=\"caption\" color=\"text.secondary\" display=\"block\">\r\n            Automatically apply generated schedule to your Daikin device each day\r\n          </Typography>\r\n        </Paper>\r\n\r\n        {/* Save Button */}\r\n        <Button\r\n          variant=\"contained\"\r\n          size=\"large\"\r\n          onClick={handleSaveSettings}\r\n          disabled={isUpdating || isZoneUpdating}\r\n        >\r\n          {isUpdating || isZoneUpdating ? (\r\n            <>\r\n              <CircularProgress size={20} sx={{ mr: 1 }} />\r\n              Saving...\r\n            </>\r\n          ) : (\r\n            'Save Settings'\r\n          )}\r\n        </Button>\r\n\r\n        <Divider />\r\n\r\n        {/* Danger Zone */}\r\n        <Paper sx={{ p: 3, border: '1px solid', borderColor: 'error.main' }}>\r\n          <Typography variant=\"h6\" color=\"error\" gutterBottom>\r\n            Danger Zone\r\n          </Typography>\r\n\r\n          <Stack spacing={2}>\r\n            <Box>\r\n              <Typography variant=\"body2\" gutterBottom>\r\n                Revoke Daikin authentication to disconnect your account.\r\n              </Typography>\r\n              <Button\r\n                variant=\"outlined\"\r\n                color=\"error\"\r\n                onClick={() => setRevokeDialog(true)}\r\n                disabled={!isAuthorized}\r\n              >\r\n                Revoke Daikin Access\r\n              </Button>\r\n            </Box>\r\n\r\n            <Box>\r\n              <Typography variant=\"body2\" gutterBottom>\r\n                Refresh authentication token (use if experiencing connectivity issues).\r\n              </Typography>\r\n              <Button\r\n                variant=\"outlined\"\r\n                onClick={() => refresh()}\r\n                disabled={!isAuthorized || isRefreshing}\r\n              >\r\n                {isRefreshing ? 'Refreshing...' : 'Refresh Token'}\r\n              </Button>\r\n            </Box>\r\n          </Stack>\r\n        </Paper>\r\n      </Stack>\r\n\r\n      {/* Dialogs */}\r\n      <ConfirmDialog\r\n        open={revokeDialog}\r\n        title=\"Revoke Daikin Access\"\r\n        message=\"Are you sure you want to revoke access to your Daikin account? You will need to re-authorize to use schedule application features.\"\r\n        confirmText=\"Revoke\"\r\n        cancelText=\"Cancel\"\r\n        onConfirm={handleRevokeToken}\r\n        onCancel={() => setRevokeDialog(false)}\r\n        isDestructive\r\n      />\r\n\r\n      <Snackbar\r\n        open={snackbar.open}\r\n        autoHideDuration={6000}\r\n        onClose={() => setSnackbar({ ...snackbar, open: false })}\r\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'right' }}\r\n      >\r\n        <Alert\r\n          onClose={() => setSnackbar({ ...snackbar, open: false })}\r\n          severity={snackbar.severity}\r\n        >\r\n          {snackbar.message}\r\n        </Alert>\r\n      </Snackbar>\r\n    </Container>\r\n  );\r\n}\r\n","import { Component, ReactNode, ErrorInfo } from 'react';\r\nimport { Container, Paper, Typography, Button, Stack } from '@mui/material';\r\nimport ErrorOutlineIcon from '@mui/icons-material/ErrorOutline';\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n}\r\n\r\ninterface State {\r\n  hasError: boolean;\r\n  error?: Error;\r\n}\r\n\r\nexport default class ErrorBoundary extends Component<Props, State> {\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): State {\r\n    return { hasError: true, error };\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n    console.error('ErrorBoundary caught error:', error, errorInfo);\r\n  }\r\n\r\n  handleReset = () => {\r\n    this.setState({ hasError: false, error: undefined });\r\n    window.location.href = '/';\r\n  };\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <Container maxWidth=\"sm\" sx={{ py: 8 }}>\r\n          <Paper sx={{ p: 4, textAlign: 'center' }}>\r\n            <Stack spacing={3} alignItems=\"center\">\r\n              <ErrorOutlineIcon color=\"error\" sx={{ fontSize: 64 }} />\r\n              <Typography variant=\"h4\">Something went wrong</Typography>\r\n              <Typography variant=\"body1\" color=\"text.secondary\">\r\n                {this.state.error?.message || 'An unexpected error occurred'}\r\n              </Typography>\r\n              <Button variant=\"contained\" onClick={this.handleReset}>\r\n                Return to Dashboard\r\n              </Button>\r\n            </Stack>\r\n          </Paper>\r\n        </Container>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n","import { BrowserRouter, Routes, Route } from 'react-router-dom';\r\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\r\nimport { ThemeProvider, CssBaseline } from '@mui/material';\r\nimport { theme } from './theme';\r\nimport Layout from './components/Layout';\r\nimport DashboardPage from './pages/DashboardPage';\r\nimport SettingsPage from './pages/SettingsPage';\r\nimport ErrorBoundary from './components/ErrorBoundary';\r\n\r\nconst queryClient = new QueryClient({\r\n  defaultOptions: {\r\n    queries: {\r\n      refetchOnWindowFocus: false,\r\n      retry: 1,\r\n    },\r\n  },\r\n});\r\n\r\nfunction App() {\r\n  return (\r\n    <ErrorBoundary>\r\n      <QueryClientProvider client={queryClient}>\r\n        <ThemeProvider theme={theme}>\r\n          <CssBaseline />\r\n          <BrowserRouter key=\"router\">\r\n            <Layout>\r\n              <Routes>\r\n                <Route path=\"/\" element={<DashboardPage />} />\r\n                <Route path=\"/settings\" element={<SettingsPage />} />\r\n              </Routes>\r\n            </Layout>\r\n          </BrowserRouter>\r\n        </ThemeProvider>\r\n      </QueryClientProvider>\r\n    </ErrorBoundary>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom/client';\r\nimport App from './App';\r\n\r\nReactDOM.createRoot(document.getElementById('root')!).render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>\r\n);\r\n"],"names":["m","require$$0","client","theme","createTheme","Layout","children","jsxs","Box","jsx","AppBar","Toolbar","Typography","Button","RouterLink","DashboardIcon","SettingsIcon","Container","ApiClient","__publicField","source","params","zone","settings","embeddedId","payload","url","response","text","body","apiClient","useAuth","queryClient","useQueryClient","data","isLoading","error","useQuery","refreshMutation","useMutation","revokeMutation","startAuth","AuthStatusChip","isAuthorized","expiresAt","CircularProgress","Chip","ErrorIcon","expiresAtDate","tooltipText","format","Tooltip","CheckCircleIcon","usePrices","PriceChart","Card","CardContent","Alert","allItems","a","b","xAxisData","p","todayData","tomorrowData","LineChart","value","GridContainer","styled","HourHeader","DayLabel","Cell","prop","state","isCurrentHour","ScheduleGrid","schedulePayload","Paper","now","currentHour","currentDay","scheduleId","schedule","actions","dayNames","todayName","tomorrowName","todayActions","todayStates","_","hour","timeKey","_a","tomorrowActions","tomorrowStates","i","ScheduleLegend","Stack","CircleIcon","useScheduleHistory","ScheduleHistoryList","expanded","setExpanded","useState","handleChange","panel","isExpanded","entry","index","panelId","timestamp","Accordion","AccordionSummary","ExpandMoreIcon","AccordionDetails","JsonViewer","title","ConfirmDialog","open","message","confirmText","cancelText","onConfirm","onCancel","isDestructive","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","useSchedulePreview","useApplySchedule","useCurrentSchedule","DashboardPage","refresh","isRefreshing","schedulePreview","snackbar","setSnackbar","applyDialog","setApplyDialog","deviceIds","setDeviceIds","applySchedule","currentSchedule","handleGenerateSchedule","handleApplySchedule","confirmApplySchedule","handleRetrieveCurrentSchedule","TextField","e","Snackbar","MuiAlert","useUserSettings","query","updateMutation","useZone","LoadingSkeleton","Skeleton","ZONES","SettingsPage","updateSettings","isUpdating","setZone","isZoneUpdating","revoke","formData","setFormData","revokeDialog","setRevokeDialog","useEffect","prev","handleSaveSettings","err","handleRevokeToken","Slider","FormControl","InputLabel","Select","z","MenuItem","FormControlLabel","Switch","Fragment","Divider","ErrorBoundary","Component","props","errorInfo","ErrorOutlineIcon","QueryClient","App","QueryClientProvider","ThemeProvider","CssBaseline","BrowserRouter","Routes","Route","ReactDOM","React"],"mappings":"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","x_google_ignoreList":[0]}